<div class="modal-header">
  <button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="$ctrl.cancel()">
    <span aria-hidden="true">&times;</span></button>
  <h4 class="modal-title">Connect Tag</h4>
</div>
<form name="targetForm" role="form" class="form-horizontal" ng-submit="$ctrl.ok(targetForm.$valid)" novalidate>
  <div class="modal-body">

    <h4>Choose Tag to target:</h4>
    <div class="form-group">
      <label for="existing" class="col-sm-3 control-label">Target: </label>
      <div class="col-sm-8">
        <div class="input-group">
          <select id="existing" name="existing" class="form-control" ng-options="t as t.label for t in $ctrl.canConnect"
                  ng-model="$ctrl.target" ng-change="$ctrl.checkElem()"></select>
          <span class="input-group-btn">
            <button type="button" class="btn btn-default" ng-click="$ctrl.target=null"><i class="fa fa-trash"></i></button>
          </span>
        </div>
      </div>
    </div>

    <h4>Or create a New one:</h4>
    <div class="form-group">
      <label for="name" class="col-sm-3 control-label">Name: </label>
      <div class="col-sm-8">
        <textarea id="name" name="name" class="form-control" ng-model="$ctrl.elem.name" rows="1"
                  ng-disabled="$ctrl.target" ng-required="!$ctrl.target" autofocus></textarea>
      </div>
    </div>
    <div class="form-group">
      <label for="code" class="col-sm-3 control-label">Code: </label>
      <div class="col-sm-8">
        <textarea id="code" name="code" class="form-control" ng-class="{'has-error': targetForm.code.$invalid && !targetForm.code.$pristine}"
                  ng-model="$ctrl.elem.code" rows="1" ng-disabled="$ctrl.target" ng-required="!$ctrl.target"></textarea>
      </div>
    </div>
    <div class="form-group">
      <label for="label" class="col-sm-3 control-label">Label: </label>
      <div class="col-sm-8">
        <textarea id="label" name="label" class="form-control" ng-class="{'has-error': targetForm.label.$invalid && !targetForm.label.$pristine}"
                  ng-model="$ctrl.elem.label" rows="1" ng-disabled="$ctrl.target" ng-required="!$ctrl.target"></textarea>
      </div>
    </div>
    <h4>Details:</h4>
    <div class="form-group">
      <label for="relationship" class="col-sm-3 control-label">Relationship: </label>
      <div class="col-sm-6">
        <textarea id="relationship" name="relationship" class="form-control" ng-model="$ctrl.rel.relationship" rows="1"></textarea>
      </div>
      <div class="col-sm-3">
        <div class="checkbox">
          <label>
            <input type="checkbox" id="reverse" name="reverse" ng-model="$ctrl.rel.reverse"> <b>Reverse</b>
          </label>
        </div>
      </div>
    </div>

  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-default pull-left" ng-click="$ctrl.cancel()">Cancel</button>
    <button type="submit" class="btn btn-primary" ng-disabled="targetForm.$invalid"><i class="fa fa-bolt"></i>&nbsp; Ok</button>
  </div>
</form>
